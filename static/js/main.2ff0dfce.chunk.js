(this.webpackJsonpintercom=this.webpackJsonpintercom||[]).push([[0],{196:function(e,t,n){e.exports=n(425)},201:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},304:function(e,t,n){},425:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),c=n.n(r),i=(n(201),n(17)),l=n(18),s=n(19),u=n(20),d=n(79),m=n(35),h=(n(202),n(192)),p=n(80),b=n(163),f=n.n(b),g=n(81),E=n(433),v=n(124),j=new f.a({bitRate:128}),O=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).start=function(){a.state.isBlocked?console.log("Permission Denied"):j.start().then((function(){a.setState({isRecording:!0})})).catch((function(e){return console.error(e)}))},a.stop=function(){j.stop().getMp3().then((function(e){var t=Object(h.a)(e,2),n=(t[0],t[1]);console.log("sending1"),Object(g.b)(n).then((function(e){a.props.webrtc.shout("chat",e),a.props.onSend(e),console.log("sending")})).catch((function(e){})),a.setState({isRecording:!1})})).catch((function(e){return console.log(e)}))},a.toggleRecord=function(){a.state.isRecording?a.stop():a.start()},a.state={isRecording:!1,blobURL:"",isBlocked:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;navigator.getUserMedia({audio:!0},(function(){console.log("Permission Granted"),e.setState({isBlocked:!1})}),(function(){console.log("Permission Denied"),e.setState({isBlocked:!0})}))}},{key:"render",value:function(){return o.a.createElement(v.a,{type:"primary",block:!0,icon:o.a.createElement(E.a,null),size:"large",onClick:this.toggleRecord,className:"audio-box__button"},this.state.isRecording?"Recording":"Record")}}]),n}(a.Component),y=Object(p.b)(O),k=(n(282),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"app-header"},o.a.createElement("h1",null,o.a.createElement(E.a,null)," Intercom"))}}]),n}(a.Component)),_=(n(283),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"app-container"},o.a.createElement("div",{className:"app-container__content"},o.a.createElement(k,null),this.props.children)),o.a.createElement("div",{className:"app-container__footer"},"\xa9 Intercom ",(new Date).getFullYear()," \xb7 Creator ",o.a.createElement("a",{href:"https://twitter.com/strange_quirks",target:"_blank"},"Philip Metzger")))}}]),n}(a.Component)),C=n(164),R=n.n(C),w=(n(284),n(428)),N=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).join=function(e){a.state.channelId&&e.joinRoom(a.state.channelId)},a.handleAddAudio=function(e){a.setState({blob:e?Object(g.a)(e,"audio/mp3"):null})},a.handleCreatedPeer=function(e,t){console.log("Peer-".concat(t.id.substring(0,5)," joined the room!"))},a.handlePeerData=function(e,t,n,o){switch(console.log("handlePeerData",t,n,o),t){case"chat":a.handleAddAudio(n);break;default:return}},a.state={channelId:e.match.params.id,blob:null,options:{autoRequestMedia:!0,debug:!1,dataOnly:!0}},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement(_,null,o.a.createElement(w.a,{className:"audio-container__card"},o.a.createElement(p.a,{options:this.state.options,onReady:this.join,onCreatedPeer:this.handleCreatedPeer,onReceivedPeerData:this.handlePeerData},o.a.createElement(y,{onSend:function(t){console.log("blob",t),t&&e.handleAddAudio(t)}}),o.a.createElement(R.a,{id:"audio-canvas",height:260,width:360,audioId:"audio-element",capColor:"red",capHeight:2,meterWidth:2,meterCount:512,meterColor:[{stop:0,color:"#f00"},{stop:.5,color:"#0CD7FD"},{stop:1,color:"red"}],gap:4}),o.a.createElement("audio",{id:"audio-element",className:"audio-element",autoPlay:!0,controls:!0,src:this.state.blob instanceof Blob?URL.createObjectURL(this.state.blob):null}))))}}]),n}(a.Component),P=Object(m.f)(N),D=n(429),I=n(427),x=n(430),S=n(431),B=n(434),A=n(435),M=n(432),z=(n(304),D.a.Text),F=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleCreateNewChannel=function(){a.props.history.push("/channel/".concat(Object(M.a)()))},a.handleJoin=function(){a.props.history.push("/channel/".concat(a.input.current.props.value))},a.input=o.a.createRef(),a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement(_,null,o.a.createElement("div",{className:"start-container"},o.a.createElement(w.a,{className:"start-container__card"},o.a.createElement("div",{className:"start-container__card-content"},o.a.createElement("div",{className:"start-container__card-top"},o.a.createElement(v.a,{type:"primary",block:!0,size:"large",icon:o.a.createElement(B.a,null),onClick:this.handleCreateNewChannel},"Create new channel")),o.a.createElement(I.a,{className:"start-container__card-divider"},o.a.createElement(z,null,"Or, join existing channel")),o.a.createElement("div",{className:"start-container__card-bottom"},o.a.createElement(x.a,{className:"start-container__form-join",name:"id",onFinish:this.handleJoin,size:"large"},o.a.createElement(x.a.Item,{name:"channelId",rules:[{required:!0,type:"regexp",pattern:new RegExp("[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"),message:"Please enter a valid existing channel ID"}]},o.a.createElement(S.a,{min:30,max:40,placeholder:"Enter channel ID",autoFocus:!0,ref:this.input})),o.a.createElement(x.a.Item,null,o.a.createElement(v.a,{type:"primary",htmlType:"submit",block:!0,size:"large",icon:o.a.createElement(A.a,null)},"Join"))))))))}}]),n}(a.Component),J=Object(m.f)(F),U=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement("div",null,o.a.createElement(m.c,null,o.a.createElement(m.a,{exact:!0,path:"/"},o.a.createElement(J,null)),o.a.createElement(m.a,{exact:!0,path:"/channel/:id"},o.a.createElement(P,null)))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[196,1,2]]]);
//# sourceMappingURL=main.2ff0dfce.chunk.js.map